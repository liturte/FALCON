{"3273": {"code": ["..ofof(F_1$ \\| \\|\\| \\|isisthe=(F_k$ \\| $$F_=( F_1$ \\|$F_1$ \\|$F_1$ \\| $ denotes$F_$F_1$ $ is$F_length $F_1$\\", "thatthein aofaof $F_is anthat it is= $F_2$ containsasnot; if (( F_1 )F_2 )) )length of $F_length(((F_2 ) $F_$F_$F_2$ $F_$F_2$ $F_ k$", "of theandtheandthetheisa stringof a sequence ofof ais a(F_1)of thecharacteror the same length$F_2$ is a sequenceofoflength $F_theofa sequence of overlapping fragmentsof $F_ k$,$F_k$ equals a prefix of$F_ k$,", "thethetheof a part of$F_$F_ j$ $isapart of$F_ j$$F_ j$ is a(F_ k$)the length of $F_$F_of$F_$F_ i$$F_ i$$F_$F_ j$$F_ j$isthe", "$F_$F_k$a$F_ k$$F_k$ is aanoftheofto the nextthe next one thatisa suffix of $F_ k$a suffixof lengththeof thelength of$F_ k$$F_ k$ isone of $F_ k$$F_ k$ is a", "to betheit$F_i$ is the substring of$F_- $F_$F_$F_ k$a$F_ k$$F_ k$the-theof $F_ k$$F_lengthis always the$F_length of $F_ k$of $F_ k$length of $F", "theand $F_istheofF_ M$ ispart of theof the$F_ i$istheof $F_F_ i$ is theof $F_ i$,theof $F_ i$ isisof $F_the$F_ k$= $F_1$, F_of the$F_", "of(ofthethat islength ofif$F_ 2$)in the sequence of$F_length of$F_ 1$ isor morelength of$F_$F_ M$F_ 1$ is\\| $ denotes$F_ 1$ is$F_ i$ is$F_ i$ is$F_ M$", "one or morethe..F_F_2$F_thea sequence ofa sequence of overlapping fragmentslengthof){$F_2, \\ldots, F_$F_ k$\\| \\omega (F_$F_thetofor thea sequence ofof length $F_ k$$F_ k$ of", "of theofof. Thisis aof $F_anof $F_is aaa sequence of overlappingis atheofsuffix of $F_ k$of $F_ k$of thelength of $F_(F_lengthlength of $F_is a prefix ofF_\\| \\| \\| \\| \\|"], "prompt": "\nQUESTION:\nYou are an archaeologist exploring the underground crypts of Rome. You have just stumbled into a hidden archive containing copies of a lost manuscript by the Knights Templar. Unfortunately, the copies have crumbled over time and now comprise thousands of small text fragments that need to be reassembled in order to restore the original manuscript (or at least a part of it). Because there were several copies of the manuscript, many text fragments overlap with other text fragments. Use a computer to rebuild the manuscript from these fragments! Deus ex machina!\n\nReconstruction of the manuscript involves placing distinct text fragments in a sequence such that whenever fragment $A$ immediately precedes fragment $B$:\n - $A$ has a suffix that is equal to a prefix of $B$\n - the shared suffix/prefix has length at least $5$\n\nIt is guaranteed that two fragments that satisfy these criteria do so in exactly one way.\n\nAn optimal reconstruction is one that is extracted from such a sequence of overlapping fragments of maximal length, i.e., a sequence that contains as many fragments as possible. Note that it is the number of fragments that is being maximized here; this may or may not maximize the number of characters in the text that is then recovered from these fragments. (Your archaeologist friends find this a bit odd, but you have an admittedly quirky compulsion to make use of as many found objects as possible.)\n\nYour task is to find an optimal reconstruction. If there are two or more maximal-length sequences of overlapping fragments, then the reconstruction is said to be \u201cambiguous,\u201d and only a higher power can help. By the grace of that same higher power, no fragment is contained within another fragment, and no sequence of overlapping fragments $F_1, F_2, \\ldots , F_ k$, for any $k \\geq 2$, ever forms a cycle, i.e., it is never the case that a suffix of $F_ k$ of length $\\geq 5$ equals a prefix of $F_1$.\n\nGiven a unique maximal-length sequence $F_1, F_2, \\ldots , F_ M$, the corresponding optimal reconstruction of the text is\\begin{equation*} F_1 \\| \\omega (F_2) \\| \\omega (F_3) \\| \\ldots \\| \\omega (F_ M) \\end{equation*}\n\nwhere $\\| $ denotes string concatenation, and $\\omega (F_ i)$ is the substring of $F_ i$ obtained by removing the prefix of length $\\geq 5$ that is equal to a suffix of $F_{i-1}$, for $2 \\leq i \\leq M$.\n\n-----Input-----\nThe first line of input contains an integer $n$ $(1 \\leq n \\leq 250)$, the number of text fragments. Each of the next $n$ lines contains one of the text fragments. A text fragment is a nonempty string of printable characters of length at most $80$, where a printable character has an ASCII value in the range $32 \\ldots 126$, inclusive. All $n$ fragments are distinct, and no fragment begins or ends with a space.\n\n-----Output-----\nIf there is a unique optimal reconstruction, output this reconstruction on a single line. Otherwise, output \u201cAMBIGUOUS\u201d. (No optimal reconstruction ever equals \u201cAMBIGUOUS\u201d.)\n\n-----Examples-----\nSample Input 1:\n7\nn fox jumps ove\nuick brown f\nThe quick b\ny dog.\nrown fox\nmps over the l\nthe lazy dog\nSample Output 1:\nThe quick brown fox jumps over the lazy dog.\n\nSample Input 2:\n4\ncdefghi\nefghijk\nefghijx\nabcdefg\nSample Output 2:\nAMBIGUOUS\nUse Standard Input format\nANSWER:\n"}}