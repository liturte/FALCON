{"3526": {"code": ["the firstthean answer{ print $m$[l_ i]$,atheanswer.in theof thethethe) { print(,) ;(i = 0 ;; i ++ )] ) ;1 ; }the answerthe answer is theto thea \" + \"single answer,\" + \"one", ":1 ],i $1 \\leis the same asandthatare the same aswith the// \u201ctrue\u201d answer.\u201cfalse\u201d answer. \u201dtheof thethe{ @link #\n2(( i )}( i )([ ] ).;( ) )(", "thethe answer sequencetheof the answerof the answer sequence$m$ isthetheanswer sequence isthethetheanswer sequence isan answer sequence.theif the answer sequencethe answer sequencethethe given.( )..( ) ; if (. length( ) ;", "ain theanswer sequence, that is,aandthataa \u201ctrue\u201doneanthea1,thea \u201cfalse\u201daAlice,thethetheaanthea \u201ctrue\u201d or \u201cfalse\u201d answer,a \u201c", "theaof the.athethetheof the sametheof the answer,the samethe// the samethe answer. Thethethe answer is thethe samethethethe samethe samethethe same,of thegiven hints. The number of", "theanswer sequencetheisthethethe number ofthethethe(1) $n$the first line of thethethe first line of thethethe first line of the(1) $n$$m$one$l_ i$ and $r_ i$and the second line of$l_ i$ $r_the first linethe", "thethecorrespondingthethetheofthetheanswerthethetheof the(i.e., the answer isthetheof theof the question, andthe number ofthe number ofthe giventhe number ofthe number ofofthe given hints.", "ain thethe'H'aaaof the answerthe first sample, theofthe first sample, thethe second sample,the first sample, thethe second sample,thethe first sample, thethe second sample,athatin thethe first sample, the secondthe first sample, thethird samplethe second sample, thethe second sample", "thethe.{ nthe answertheanswer. Aliceis(answer isthe answer isthe sameasthe answer. Alicethe answer isis the same asan answer, andtothisgiven thequestion,thethe firstthe firstanswer, andthe first two hints, andthe secondthe firstthe secondan answer, and", "aofthea0, 1] ) ;( ) {[ 1 ] )( ) ; } }( ) ;0( ) ;0 ; i <) { if (0 ) {[ 0 ]].( ) ;0 ; i <) {( ){ if[ 1 ].;.) { for ( int"], "prompt": "\nQUESTION:\nBob is completing a true/false worksheet, consisting of a list of $n$ problems where each answer is either \u201ctrue\u201d or \u201cfalse\u201d. The problems are numbered from $1$ to $n$. They are too hard for Bob, so the TA, Alice, has given Bob $m$ hints. For each hint $i$, Alice gives Bob an (inclusive) range of questions $[l_ i, r_ i]$, and tells him either \u201call answers in the range are the same\u201d (in other words, either all are \u201ctrue\u201d, or all are \u201cfalse\u201d); or \u201cnot all of the answers in the range are the same.\u201d Help Bob count how many different answer sequences satisfy the given hints. Since this number may be huge, print the answer modulo $10^9+7$.\n\n-----Input-----\nThe first line of the input contains two space-separated integers $n$ and $m$ $(1 \\le n \\le 5000, 1 \\le m \\le 1000000)$, the number of problems and number of hints, respectively. The next $m$ lines each encode a hint, and contain two space-separated integers $l_ i$ and $r_ i$ $(1\\leq l_ i \\leq r_ i\\leq n)$ followed by either the word same, if all answers in the range are the same, or different, if all answers in the range are not the same (i.e., at least one answer is \u201ctrue\u201d and at least one other answer is \u201cfalse\u201d).\n\n-----Output-----\nPrint the number of different answer sequences satisfying all the hints, modulo $10^9+7$.\n\n-----Sample Explanation-----\nIn the first sample, the four possible sequences consistent with the hints are 00000, 10000, 01111, and 11111 where 0 stands for a \u201cfalse\u201d answer and 1 stands for a \u201ctrue\u201d answer. In the second sample, the third hint conflicts with the first two hints, so no answer sequence exists consistent with all hints.\n\n-----Examples-----\nSample Input:\n5 2\n2 4 same\n3 5 same\nSample Output:\n4\nUse Standard Input format\nANSWER:\n"}}