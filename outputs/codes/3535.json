{"3535": {"code": ["theof theelectro-dynamics of a100000$100000$ \u2013 theof thethethe$1 \\leq$0 \\leq K\\leq 100000$$2 \\leq N$0 \\leq M$\\leq 100000$\\leq N$ \u2013$0 \\leq$1\\leqN$", "theof theof the(up, down)theof theof theof theof the$1\\leq$0 \\leq= $1 \\leq$0 \\leq K \\leq 100000$$1 \\leq$1 \\leq N$ and\\leq M$ \u2013theN$$1 \\leq N$ and", "of theand $0 \\leq100000$number of..) {) ; }( 1.0) {.},,) ;( 1.0 ) ;( 1.0 ) ;() )( 1.0 )1.0 ).( 1.0 ) ; }() ;( ) ; }", "( N $MM$and $Kthein theof the$s_ i$theofthetheand $s_ i$.theof theof thetheand $K$of thethetheof the electron.thea$s_ i$in thethe $s_ i$", "theof thebeofof theM$, $N$, $M$,theof thenumber of$K$thetheis the sameof thethe number ofelectro-dynamics ofthe(1/2/3/4/4)=2/3/4/2/3/4/3/4/4/1/2/3", "(aof theof thetheof thei$, $1theof the$1\\leq$0 \\leq K$1 \\leq N$theand theN$ and $1 \\leq M$$0( ) -$1M$K$1 2$1$1 \\leq N$ and $1N", "an electrontheof$1$0$1N$ andM$ and $0 \\leq K$1M$$1 \\leq N$$2 \\leq N$ and $1$2 \\leqN$ and $1 \\leq1 1\\leq KN$ \u2013theN$ and $1 \\leqM$", "21 11 1133211 121 101 10 1 1 11 11 1 1 11 1 11 1 11 1 11 1 11 1 1 11 11 121 1 1 1 11 1", "N$N$ M$$1M$ K $1 \\leq 100000$theof the0K $s_ i$N$ M$K $s_ i$the$N$ M$\\leq N$ M$$1 \\leqN$ K$M$ K$N$K$ K$N$K$ K$$", "thethetheof thetheNMM$ \u2013 thethe$0 \\leq$1 \\leq N$ \u2013$1 \\leq$0\\leq N$ and$0 \\leq M$ \u2013$0$1\\leq K\\leq 100000$$0 \\leq K \\leq 100000"], "prompt": "\nQUESTION:\nMatthew the physicist studies the quantum electro-dynamics of a silicon-based rectangular microchip. The microchip consists of a very large $N \\times M$ grid of electrons. Each electron has either positive (up) or negative (down) spin, denoted by $+$ and $-$ respectively.\n\nMatthew does not know the spin of all the electrons, but he has done $K$ measurements. In the $i$-th measurement, he discovered that the electron at position $(y_ i, x_ i)$ has a given spin $s_ i$. He also knows that in each $2\\times 2$ subgrid, there are equally many electrons with positive and negative spin. He wants to know whether he can recover the state of every electron based on his measurements. If not, he would like to know how many possible states are consistent with his measurements. For classified reasons, he wants the answer modulo $10^9 + 7$.\n\n-----Input-----\nThe first line contain three numbers $N$, $M$ and $K$: the height of the grid, the width of the grid and the number of measurements. The next $K$ lines contain a spin $s_ i$ where $s_ i$ is either $+$ or $-$, and two numbers $1 \\leq y_ i \\leq N$ and $1 \\leq x_ i \\leq M$ \u2013 the coordinates of the electron. Matthew never did two measurments at the exact same location.\n\nWe always have $1 \\leq N, M \\leq 10^9$ and $0 \\leq K \\leq 100000$.\n\n-----Output-----\nOutput the total number of valid states consistent with Matthew\u2019 measurements modulo $10^9 + 7$.\n\n-----Examples-----\nSample Input:\n2 4 4\n+ 1 1\n- 1 2\n+ 1 3\n- 1 4\nSample Output:\n2\nUse Standard Input format\nANSWER:\n"}}