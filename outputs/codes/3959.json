{"3959": {"code": ["a number ofof a typeof type y.is thethe same typethe numberinaandofofg_{i} Pokemon in theof the.( n ) )i ]]. length]. length ;; i ++ )g_1 []. length ;]. length ;[] [ i ] []. length ;", "ntheand themof atype. n =)in thek - th gym.g_i = 1 ;= 2 ; kk=k =k ) ).( k)= 2 ;.)) {( k; } } if (,( k, n,", "ofthetype of a Pokemonoftypeof the gyms.= [ ] ;. length ; i ++])] ;] ;[] ) ;[ i ] =. length ; i <) ; i] ; }[ i ] ;. length] ; }]] ;] ; }[", "( 1 \u2264g_n\u00a0\u2014the number oftheofofm \u2264 10^5,of them \u2264mtheg_nthei \u2264n \u2264thein thenand themof theof theof thethe number ofg_n. In", "inthe evolutionof the evolution).( 1).() )..: ().. i = 0].: ()..1 ).).. i = 0,. i = 0 ;.( ) ) ;", "that thehaveof the same typethe same type asof.andthethe type1.the number of1.) ; }if; }.(.) ; }( ) {.. ig_i ].]. length - 1", "them \u2264thattheofofaof thethethe(1 \u2264 n \u2264the number of gyms(1 \u2264nofand the number ofthe number ofisofof thethe numberofof thethe number ofof thethe number of", "nthethe number ofPokemon typeg_2..[ \"n\" ] [.[ \"m\" ]].[ \"n\" ] [ \"n\"].[ \"n\"\"n\"[ \"m\" ][ \"g_i\" ].\"n\", \"n\"\"g_m\" ] [ \"n\")", "of thetype ofthe evolutionthe samein the evolution camp.of theofi-th of these linesthe number of gymsis theofthethe number ofofof theaof the evolutionthe evolutionthe(i-th of these linesthe number ofof theof the evolution camp.the evolution camp.of the", "theofof thetypethe evolution.in thetheof theof thethe number oftheof them. Thepokemons areisin thetheof thethethetheof thethe evolutionin athe evolution plan. The evolution"], "prompt": "\nQUESTION:\nIt's that time of the year, Felicity is around the corner and you can see people celebrating all around the Himalayan region. The Himalayan region has n gyms. The i-th gym has g_{i} Pokemon in it. There are m distinct Pokemon types in the Himalayan region numbered from 1 to m. There is a special evolution camp set up in the fest which claims to evolve any Pokemon. The type of a Pokemon could change after evolving, subject to the constraint that if two Pokemon have the same type before evolving, they will have the same type after evolving. Also, if two Pokemon have different types before evolving, they will have different types after evolving. It is also possible that a Pokemon has the same type before and after evolving. \n\nFormally, an evolution plan is a permutation f of {1, 2, ..., m}, such that f(x) = y means that a Pokemon of type x evolves into a Pokemon of type y.\n\nThe gym leaders are intrigued by the special evolution camp and all of them plan to evolve their Pokemons. The protocol of the mountain states that in each gym, for every type of Pokemon, the number of Pokemon of that type before evolving any Pokemon should be equal the number of Pokemon of that type after evolving all the Pokemons according to the evolution plan. They now want to find out how many distinct evolution plans exist which satisfy the protocol.\n\nTwo evolution plans f_1 and f_2 are distinct, if they have at least one Pokemon type evolving into a different Pokemon type in the two plans, i. e. there exists an i such that f_1(i) \u2260 f_2(i).\n\nYour task is to find how many distinct evolution plans are possible such that if all Pokemon in all the gyms are evolved, the number of Pokemon of each type in each of the gyms remains the same. As the answer can be large, output it modulo 10^9 + 7.\n\n\n-----Input-----\n\nThe first line contains two integers n and m (1 \u2264 n \u2264 10^5, 1 \u2264 m \u2264 10^6)\u00a0\u2014 the number of gyms and the number of Pokemon types.\n\nThe next n lines contain the description of Pokemons in the gyms. The i-th of these lines begins with the integer g_{i} (1 \u2264 g_{i} \u2264 10^5)\u00a0\u2014 the number of Pokemon in the i-th gym. After that g_{i} integers follow, denoting types of the Pokemons in the i-th gym. Each of these integers is between 1 and m.\n\nThe total number of Pokemons (the sum of all g_{i}) does not exceed 5\u00b710^5.\n\n\n-----Output-----\n\nOutput the number of valid evolution plans modulo 10^9 + 7.\n\n\n-----Examples-----\nInput\n2 3\n2 1 2\n2 2 3\n\nOutput\n1\n\nInput\n1 3\n3 1 2 3\n\nOutput\n6\n\nInput\n2 4\n2 1 2\n3 2 3 4\n\nOutput\n2\n\nInput\n2 2\n3 2 2 1\n2 1 2\n\nOutput\n1\n\nInput\n3 7\n2 1 2\n2 3 4\n3 5 6 7\n\nOutput\n24\n\n\n\n-----Note-----\n\nIn the first case, the only possible evolution plan is: $1 \\rightarrow 1,2 \\rightarrow 2,3 \\rightarrow 3$\n\nIn the second case, any permutation of (1,  2,  3) is valid.\n\nIn the third case, there are two possible plans: $1 \\rightarrow 1,2 \\rightarrow 2,3 \\rightarrow 4,4 \\rightarrow 3$ $1 \\rightarrow 1,2 \\rightarrow 2,3 \\rightarrow 3,4 \\rightarrow 4$\n\nIn the fourth case, the only possible evolution plan is: $1 \\rightarrow 1,2 \\rightarrow 2$\nUse Standard Input format\nANSWER:\n"}}