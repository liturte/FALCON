{"3293": {"code": ["the vendingit hasthe vendingisthe; $n$ $n$of$i$, $p$the position in the- $m$ ($1\\le m \\le\\le 1000000$) isthe vending price of thesell from this$s$ ($1\\le\\leposition$s$ is the$s$ is theathe", "athebuyersfrom$s$$p$ ($1\\le p \\letheabeingthesnack position inof a vendingthe$p$ ($1\\le mwesnackat this position$m$ is the$s$ is thein the machine.buyers from thesnack position in the$m$ is", ". Thatthe vendingisthethethefor thesnackof the vendingbeamuchthe vendingmalus tothe vending price. Itthe vendingin order to bethe vendingin thethe vendingthe vending( $1\\lethe vending) { if (( ) ;if", "a)buysthem \\le100000$) isthewe have thewethat thebethesnack isselling somefor thetheis the- $s$ ($1\\le= $s$ (i)$.$s$ ($1\\le stheof thethe position of)$n$ is thethe", "the-thethe1000000$) is theto buy from- $i$is the(i)$) is thenumber of snacksin the machine.(i)$ is the(i)$) is thein the{) ) ;$n$ is theselling the$m$ $s$thetheposition(i)$. That is,", "$f(i)$. Thisthethesellsat $f(i)$. Thattheis theatoa vending machine,aandthe.:....-...... is ( \"Bob\"", "the vendingthe: - $s$the100000$snack from the: - $p$ $m$the$p$ $m$tothe vendingisaa100000$, $s$ $m$ $s$the vending pricetoBob must pay to buy$s$ $n$ isthe vendingthe$f", "athe$f$thesell thethe vendingmillionthe vending() ) )( ) ).( ) ) )..sells( ) )( ))( ); for (0; i <length ; i ++snackif ((sells ( ) ;", "youin the vendingthethe:($s$thethea snackbeingthe vendingthe vendingmight be different from thethe vendingis the vending price$n$the vending= $f(i)$.$n$ $n$ is thebethe vendingthe vending(m$ $s$)", ". This. Itthethe; }$n$ =if $n$and$p$$m$ is thethesnackifsnacksnacka vendingit is thesnackthe vendingsnack at this position(sells fromsnack= $s$$s$ is the numberof the"], "prompt": "\nQUESTION:\nSleazy Bob has happened upon a vending machine. After watching enough people buy tasty snacks, Bob has realized that the vending machine is broken!\n\nHere\u2019s what Sleazy Bob observes:\n - A person tries to buy a snack\n - The vending machine then checks to see if there are any left of that snack\n - If there are any left, the machine charges the person for that snack\n - If the machine successfully charges the person, it then gives the person a different snack! Possibly no snack at all, if the machine is out of the different snack!\n\nSleazy Bob notices that, although the machine is broken, it is at least consistent. Whenever a customer buys a snack from position $i$, the machine vends from position $f(i)$, where $f$ is some predictable function.\n\nNow, Bob wants to make a profit from the machine. He wants to buy some snacks from the machine, and then turn around and sell the snacks he gets for the market price of the snack. This may be different from the vending price. If a cheap snack is at $i$, and an expensive snack is at $f(i)$, he could rake in the cash! Assuming Bob can always find buyers for his snacks, what is the maximum net gain that Bob can obtain by buying some number, possibly zero, of snacks and turning around and selling them later? You may assume that Bob has enough money from other shady activities to cover the cost of buying any number of snacks from the vending machine.\n\n-----Input-----\nEach input will consist of a single test case. Note that your program may be run multiple times on different inputs. Each input begins with a line with a single integer $n$ ($1 \\le n \\le 100000$), which is the number of snack positions in the machine. Each of the next $n$ lines contains 4 space-separated integers, $f$ $p$ $m$ $s$, which describe a snack position in the machine, in order from 1 to $n$, where:\n - $f$ ($1\\le f \\le n$) is the value of $f(i)$. That is, it is the position from which the machine will vend when Bob buys from this position\n - $p$ ($1\\le p \\le 1000000$) is the price Bob must pay to buy from this position\n - $m$ ($1\\le m \\le 1000000$) is the market price of the snack at this position\n - $s$ ($1\\le s \\le 1000000$) is the number of snacks at this position\n\n-----Output-----\nOutput a single line with a single integer, indicating the maximum profit Sleazy Bob can get from his nefarious abuse of the broken vending machine.\n\n-----Examples-----\nSample Input 1:\n3\n1 2 3 1\n2 3 4 1\n3 4 5 1\nSample Output 1:\n3\n\nSample Input 2:\n3\n2 2 3 8\n3 1 5 6\n1 9 4 7\nSample Output 2:\n39\nUse Standard Input format\nANSWER:\n"}}