{"3059": {"code": ["andtheso thatcanthethatthe correctthe$4$ in0.50000$, the correctthe correct$2$ in thethe correcttheat which thethe same time $1$the correctat which thethe correct time,the correctthethethe correctof thethe correct time, asthe correct time of the", "beenof a$3$5000$$5000$, $4$, $5$,( $2) < n$\\let <$5$,at which== 0 )t, 0thethethat thethethetheof;$3$, $5$, $4$, $5$in the routethe", "the:- 1 / $n$$r$ seconds,a2 / $n$$n$ seconds,and$n$ seconds, $m$$n$ seconds, $t$the same timethethethethethethe# oftheisthe time of thethethethe second,for the nextof $r$ seconds.", "theof $50000$- an integertheand $m$\\le 50000$of the(assuming1$< $50000$50000$, $1 < $50000$,<$p$, $t$ is the) $d$> 0$, $p$ is$d$ is the number oftricksat the same timethe", ".of1 ).the()thetime( $0 << n$the time in thethat the$0 <$1the(thethetheatone of the( )) {atthe( ) ; if (", "atthetheofa single playthrough- an integer $t$ ($1the time in the route$1betweenand $t$theof the0 )tothe.a= 0 ; i <<tricks; i ++ )(1 )) { if)( ) ) {", "time you havesucceeded at improvingone of these tricks).ofone of the(assuming$50000$). Theofthat aasucceededthe.1,) ).(succeeded,of $3$ in $50000$ to(probablythethethe same time0,theat least $4$ is", "aa single playthrough.a single playthrough1)the.1 ) +1 ) +3 ) +,-a double) + 1- 1 ) +- 12 )+ 1 ) +(3 )+ 1) + 1 ) +() +( 0 ) +) +", "the correcttheof the. Achancethethethethe) == 0 )thean integer $t$ ($0the0the) == 0 )( int ))] ) == 1] ) ==) == 1 )] ) == 1 ).) == 1 ) {} else if () ==", "the.= 0 ;-<5000$; $t$-$p$ -tthe time inthe0 ;== 0in the route,thein the route,thethethein the route,whenis in the correct direction,ofthetheand $t$ is the numberthe(t$, $p$,"], "prompt": "\nQUESTION:\nA speedrun is a playthrough of a game with the intention to complete it as quickly as possible. When speedrunning, you usually follow a pre-planned path through the game. Along this path, there may be some places where you have to pull off a difficult technique, or trick, which may cause a delay if you fail to pull it off successfully. Luckily you can reset the game at any time: if you have made a few mistakes, you can start a new run, losing your progress but instantaneously starting over with a clean slate. You can do this as often as you like.\n\nThe game you are currently speedrunning has a record of $r$ seconds, which you intend to beat. You have discovered a path through the game that, in the best case, takes $n < r$ seconds. There are some tricks along the way, though: you know exactly where along the run they occur, what the probability is that you will pull them off successfully, and how many seconds you have to spend to recover if they fail.\n\nGiven this data, you want to find the optimal strategy for when to reset the game to minimise the expected time to set a new record. Write a program to determine what this smallest possible expected time is.\n\n-----Input-----\nThe input consists of:\n - One line with three integers $n$, $r$ and $m$ ($2 \\leq n < r \\leq 5000$, $1 \\le m \\le 50$), where $n$ and $r$ are as described above and $m$ is the number of tricks.\n - $m$ lines, each containing three numbers describing a trick:\n - An integer $t$ ($1 \\le t < n$), the time in the route (assuming no failed tricks before) at which the trick occurs,\n - a real number $p$ ($0 < p < 1$ and $p$ has at most $6$ digits after the decimal point), the probability that the trick succeeds, and\n - an integer $d$ ($1 \\le d \\le 1000$), the number of seconds required to recover in case the trick fails.\n\nThe tricks are given in sorted order by $t$, and no two tricks occur at the same time $t$ in the route.\n\nYou may assume that, without resetting, a single playthrough has a probability of at least $1$ in $50000$ to succeed at improving the record.\n\n-----Output-----\nOutput the expected time you will have to play the game to set a new record, assuming an optimal strategy is used. Your answer should have an absolute or relative error of at most $10^{-6}$.Explanation of Sample Input 1\n\nThe record for this game is $111$ seconds, and your route takes $100$ seconds if everything goes right.\n\nAfter playing for $20$ seconds, there is a trick with a $50\\% $ success rate. If it succeeds, you keep playing. If it fails, you incur a $10$ second time loss: now the run will take at least $110$ seconds. It is still possible to set a record, but every other trick in the run has to be successful. It turns out to be faster on average to reset after failing the first trick.\n\nThus you repeat the first $20$ seconds of the game until the trick is successful: with probability $1/2$, it takes $1$ attempt; with probability $1/4$, it takes $2$ attempts; and so on. On average, you spend $40$ seconds on the first $20$ seconds of the route.\n\nOnce you have successfully performed the first trick, you want to finish the run no matter the result of the other tricks: it takes $80$ seconds, plus on average $1$ second loss from each of the remaining $4$ tricks. So the expected time until you set a record is $124$ seconds.\n\n-----Examples-----\nSample Input 1:\n100 111 5\n20 0.5 10\n80 0.5 2\n85 0.5 2\n90 0.5 2\n95 0.5 2\nSample Output 1:\n124\n\nSample Input 2:\n2 4 1\n1 0.5 5\nSample Output 2:\n3\n\nSample Input 3:\n10 20 3\n5 0.3 8\n6 0.8 3\n8 0.9 3\nSample Output 3:\n18.9029850746\nUse Standard Input format\nANSWER:\n"}}