{"2194": {"code": ["$0$k$$q$\"$q$$q$ $a$ $a_2 $a_i2$n$ $a_i $a_i\\cdot 2^k+1, (2i-1) \\cdot2^k+1,$q$ $a_ia_in$)\u00a0\u2014 $Reverse(k)$;", "$q$ $a_1,$n$, $q$ $a_2,$q$ $a_2,$n$$n$ $n$ $q$ $q$$n$$q$ ($n$n$ $q$$q$ $q$ $n$$n$ $n$ $n$ $n$ $n$$q$ $n$", "$q$ line contains$a_1,$q$$q$ lines contains$q$ lines contains$a_1, a_2, \\ldots, a_{2^n}$ ($0\\le$0 \\le$0 \\le\\le$a_2, a_{2^n$}$ $0\\le n$)\u00a0\u2014the\\le n", "$q$a_2, a_1, a_2, a_{2^n}$$a_i\\cdot2$a_2$ $a_i$a_i\\cdot2^n$ $1 \\le$a_2$ $1 \\le$a_i$ $1 \\le$a_i\\cdot$a_i\\cdot $a", "the$a$$a$$a_2, a_i,$a_2, a_{2^n}$ ($a_2, a_{2^n}$$q$ ($1 \\le$q$ ($0 \\le n$a_1$ $a_2$ $a_i$a_2$ $a_i$a_i $a_2", "$q$ $$q$ $q$$q$ $n$ $q$ $1 $$a_in$n$$k$ ($0 \\lek $0 \\le$1 $q$ ($0 \\le$q$ $n$ $1$q$ ($0 \\le$n$ $q$ $1$a_i $n$$q$", "$q$$q$$q$$q$$q$ $n$ $q$$q$ $n$$q$ $n$2$q$ $n$ $2$$n$ $2$ $n$ $2$ $n$$n$ $n$ $n$ $n$$k$ $n$$n$ $2$ $n$", "= $q$1$ q$$q$ lines contains queries$n$ $q$ lines contains queries$n$$a_x$$q$ lines contains queries$a_i $a_2 $q$$a_i$q$ lines contains$q$ lines contains queries\\le$a_1 $q$$a_i$q$$q$", "array$q$ lines arein thearray $q$$q$$q$ $q$$q$ $q$ $q$ $q$$q$ $q$$q$ $q$$q$ $q$$q$ $q$ $q$a_2, a_3,$q$$q$ $q$ $q$ $q$", "\\cdot$q$$a_x$$q$\\cdot 2^k+1, (2i-1) \\cdot 2^k+1,$q$$q$\\cdot 2^k+1,$q$ ($0 \\le q$a_i $ a_i$q$$q$ $n$ $q$$q$ ($"], "prompt": "\nQUESTION:\nYou are given an array $a$ of length $2^n$. You should process $q$ queries on it. Each query has one of the following $4$ types:   $Replace(x, k)$\u00a0\u2014 change $a_x$ to $k$;  $Reverse(k)$\u00a0\u2014 reverse each subarray $[(i-1) \\cdot 2^k+1, i \\cdot 2^k]$ for all $i$ ($i \\ge 1$);  $Swap(k)$\u00a0\u2014 swap subarrays $[(2i-2) \\cdot 2^k+1, (2i-1) \\cdot 2^k]$ and $[(2i-1) \\cdot 2^k+1, 2i \\cdot 2^k]$ for all $i$ ($i \\ge 1$);  $Sum(l, r)$\u00a0\u2014 print the sum of the elements of subarray $[l, r]$. \n\nWrite a program that can quickly process given queries.\n\n\n-----Input-----\n\nThe first line contains two integers $n$, $q$ ($0 \\le n \\le 18$; $1 \\le q \\le 10^5$)\u00a0\u2014 the length of array $a$ and the number of queries.\n\nThe second line contains $2^n$ integers $a_1, a_2, \\ldots, a_{2^n}$ ($0 \\le a_i \\le 10^9$).\n\nNext $q$ lines contains queries\u00a0\u2014 one per line. Each query has one of $4$ types:   \"$1$ $x$ $k$\" ($1 \\le x \\le 2^n$; $0 \\le k \\le 10^9$)\u00a0\u2014 $Replace(x, k)$;  \"$2$ $k$\" ($0 \\le k \\le n$)\u00a0\u2014 $Reverse(k)$;  \"$3$ $k$\" ($0 \\le k < n$)\u00a0\u2014 $Swap(k)$;  \"$4$ $l$ $r$\" ($1 \\le l \\le r \\le 2^n$)\u00a0\u2014 $Sum(l, r)$. \n\nIt is guaranteed that there is at least one $Sum$ query.\n\n\n-----Output-----\n\nPrint the answer for each $Sum$ query.\n\n\n-----Examples-----\nInput\n2 3\n7 4 9 9\n1 2 8\n3 1\n4 2 4\n\nOutput\n24\n\nInput\n3 8\n7 0 8 8 7 1 5 2\n4 3 7\n2 1\n3 2\n4 1 6\n2 3\n1 5 16\n4 8 8\n3 0\n\nOutput\n29\n22\n1\n\n\n\n-----Note-----\n\nIn the first sample, initially, the array $a$ is equal to $\\{7,4,9,9\\}$.\n\nAfter processing the first query. the array $a$ becomes $\\{7,8,9,9\\}$.\n\nAfter processing the second query, the array $a_i$ becomes $\\{9,9,7,8\\}$\n\nTherefore, the answer to the third query is $9+7+8=24$.\n\nIn the second sample, initially, the array $a$ is equal to $\\{7,0,8,8,7,1,5,2\\}$. What happens next is:   $Sum(3, 7)$ $\\to$ $8 + 8 + 7 + 1 + 5 = 29$;  $Reverse(1)$ $\\to$ $\\{0,7,8,8,1,7,2,5\\}$;  $Swap(2)$ $\\to$ $\\{1,7,2,5,0,7,8,8\\}$;  $Sum(1, 6)$ $\\to$ $1 + 7 + 2 + 5 + 0 + 7 = 22$;  $Reverse(3)$ $\\to$ $\\{8,8,7,0,5,2,7,1\\}$;  $Replace(5, 16)$ $\\to$ $\\{8,8,7,0,16,2,7,1\\}$;  $Sum(8, 8)$ $\\to$ $1$;  $Swap(0)$ $\\to$ $\\{8,8,0,7,2,16,1,7\\}$.\nUse Standard Input format\nANSWER:\n"}}