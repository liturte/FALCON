{"3570": {"code": ["the first line ofisatheone ofofaof thethe first line ofthethethe first line ofofthethe) ;0 ) {,) ; }).( ) ; }the$n$ lines, thatthe last linein the last line of", "telling that awill be:: n,: $:,1 ],: $ e:,],[ 2 ],: $ e: $ e],: $ e::: $ e:: $ e} }.0 ],: $ e", "theisaofthe== $..; }( $ e=..] = $ e ;= $ e) {a\" \".[] = $( \" \" ) ;..\" \".", "all thethea singletothat the last eventofbeandthe last$n$the last$r$is the lastofthethe last eventis theofthe lastevent was notthe last event wasthe last event$e_1$ $\\ldots,of $e_1$ is the numberthe last event wasthe last event", "adreamswill.event\\ l\\ l1) :: [: [ \"A\", \"B\":, \"A\", \"C\"\"A\", \"B\", \"C\", \"C\", \"A\",, \"C\", \"C\"\"A\",, \"C\", \"C\"\"C\", \"", "theto theofoftheofof thetheof thethethethe last(see below for format ofof thein theis of the formof theof thetheline is of thethethe$e_1,the firstthe firstof the first line is", "thethethe lastin thethe= 1 ;= 0 ;] = $[];] ); } }for] [] =(= 0 ;[ ]] ; $1 ; $; }[ 1 ]] ; } }) { foreach ([ 0 ] [", "telling thatthethe lastwasatheof thein thetheof thethe lastdreams, and scenarios.theis of theof the form \u201cS $s$wasthe lastdreams, andis of theof the form \u201cSforthe last event wasofthe last eventthe last event", "thethethe lastevent,ato be countedone of the followingtheis athethe first eventthe first event ofain thethe lastto bethesometimes,aaathey werethe firstthe firstthein the first line of", "of. thein thethelinetheof thethe eventtheoflineof thethe firstthe firstthe first line oftheline ofthe first lineof thethat the eventathe last lineof the.the first line of the"], "prompt": "\nQUESTION:\nA common plot device in story-telling is the \u201cAll Just A Dream\u201d trope. Typical symptoms of this trope being used are talking lions, main characters dying, yodeling aliens on monocycles, and a general plethora of weird events. Then, of course, someone wakes up and it is revealed that everything that happened during the entire season did in fact not happen at all. It was All Just A Dream (or some kind of hallucination), and the days of our lives spent watching all those episodes are lost forever. In order to cause further confusion and uncertainty, this can also be done in layers, with characters having dreams within dreams within dreams, and so on. \n\nWhen the All Just A Dream trick is taken too far and gets used too often, it can get difficult to keep track of what has actually happened. This is where you enter the picture. You will be given a list of events, dreams, and scenarios. Each scenario specifies some events that have happened and some others that have not happened. Your job is to determine for each scenario whether that scenario is possible (possibly using the All Just A Dream trick).\n\n-----Input-----\nThe first line of input consists of an integer $0 \\le n \\le 50000$, the number of events, dreams and scenarios. Then follow $n$ lines, giving the events, dreams, and scenarios in chronological order. Each line is in one of the following forms:\n - An event line is of the form \u201cE $e$\u201d, indicating that event $e$ happens (see below for format of $e$).\n - A dream line is of the form \u201cD $r$\u201d, indicating that the last $r$ events that happened were All Just A Dream. Note that these events are now considered to not have happened, so they should not be counted when processing subsequent D lines.\n - A scenario line is of the form \u201cS $k$ $e_1$ $\\ldots $ $e_ k$\u201d, where $1 \\le k \\le 30$ is an integer giving the number of events and $e_1, \\ldots , e_ k$ is the list of events of the scenario. In a scenario, each event may be prefixed with a \u2018!\u2019, indicating that the event did not happen in this scenario.\n\nEvents are strings containing at most $20$ characters and using only the characters \u2018a\u2019-\u2018z\u2019 and underscores (\u2018_\u2019). For \u2018D\u2019 lines, you can assume that $r$ is an integer between $1$ and $R$, where $R$ is the total number of events that have happened so far (and that have not turned out to be a dream). For \u2018E\u2019 lines, you can assume that $e$ is not an event that has already happened, except if the previous occurence of the event turned out to be a dream, in which case it can happen again.Warning\n\nThis problem has somewhat large amounts of input and output. We recommend you to make sure that your input and output are properly buffered in order to make the most of the few seconds of execution time that we give you.\n\n-----Output-----\nFor each scenario in the input, output a line as follows:\n - \u201cYes\u201d if the given scenario is consistent with what has happened so far.\n - \u201c$r$ Just A Dream\u201d if the given scenario would be consistent with what has happened so far, provided a \u201cD $r$\u201d line had occurred just before the scenario. If there are many possible values of $r$, choose the smallest value. Note that you should not consider this hypothetical \u201cD $r$\u201d line to have occurred (as illustrated by sample input 2 below).\n - \u201cPlot Error\u201d otherwise.\n\n-----Examples-----\nSample Input:\n10\nE business_as_usual\nE bobby_dies\nS 1 bobby_died\nE stuff_happens\nE jr_does_bad_things\nS 2 !bobby_dies business_as_usual\nE it_goes_on_and_on\nD 4\nS 1 !bobby_dies\nS 2 !bobby_dies it_goes_on_and_on\nSample Output:\nPlot Error\n3 Just A Dream\nYes\nPlot Error\nUse Standard Input format\nANSWER:\n"}}