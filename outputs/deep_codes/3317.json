{"3317": {"code": ["from collections import defaultdict\n\ndef solve(s, q, queries):\n    n = len(s)\n    next_index = defaultdict(lambda: [0]*26)\n    next_index[n][ord(s[-1]) - ord('A')] = n\n    for i in range(n-2, -1, -1):\n        for j in range(26):\n            if ord(s[i]) - ord('A') == j", "def longest_sequence_length(s, queries):\n    s = s.lower()\n    sequences = [0] * len(s)\n    for i in range(1, len(s)):\n        j = sequences[i-1]\n        while j > 0 and s[i] != s[j]:\n            j = sequences[j-1]\n        if s[i] == s[j]:\n            j += 1\n        sequences[i] = j", "def longest_matching_substring(s, queries):\n    n = len(s)\n    max_len = [0] * n\n    prev = [0] * n\n\n    j = 0\n    for i in range(1, n):\n        while j > 0 and s[i] != s[j]:\n            j = prev[j-1]\n        if s[i] == s[j]:\n            j += 1\n        max_len", "def longest_common_substring(s, i, j):\n    # Compute the length of the common substring\n    length = 0\n    while i + length < len(s) and j + length < len(s) and s[i + length] == s[j + length]:\n        length += 1\n    return length\n\ndef solve():\n    s = input()\n    q = int(input())\n    for _ in range(q):\n        i, j", "import sys\n\ndef read_input():\n    s = input().strip()\n    n = int(input().strip())\n    queries = [list(map(int, input().strip().split())) for _ in range(n)]\n    return s, queries\n\ndef longest_common_substring(s, queries):\n    s += '$'\n    n = len(s)\n    p = [0] * n\n    for i in range(1, n):"], "prompt": "\nQUESTION:\nA brokerage firm is interested in detecting automatic trading. They believe that a particular algorithm repeats itself; that is, it makes the same sequence of trades at a later time. The firm has identified a set of 26 key stocks that they believe are likely to be traded in concert, and they\u2019ve encoded a series of trades as a string of letters: the letter itself indicates the stock, upper case indicates a buy, lower case indicates a sell. They want you to write a program to determine, for any two starting points, the longest sequence of identical trades from those two starting points, starting from and including those starting points as the first trade in the sequence.\n\n-----Input-----\nThere will be a single test case in the input. This test case will start with a string $s$ on the first line, consisting solely of upper case and lower case letters ($1 \\le \\text {length}(s) \\le 100000$). On the next line will be an integer $q$ ($1 \\le q \\le 100000$), indicating the number of queries. The following $q$ lines each describe a query with two integers, $i$ and $j$ ($0 \\le i < j < \\text {length}(s)$), which represent two zero-based positions in the string.\n\n-----Output-----\nFor each query, output a single integer, indicating the length of the longest sequence of trades starting at $i$ which is identical to the sequence of trades starting at $j$.\n\n-----Examples-----\nSample Input:\nABABABcABABAbAbab\n3\n0 2\n1 6\n0 7\nSample Output:\n4\n0\n5\nPlease provide the solution as pure code only, without explanations or comments.\n\nANSWER:\n```python\n"}}