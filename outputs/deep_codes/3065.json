{"3065": {"code": ["QUESTION:\nBeing a space captain can be a dangerous endeavour, especially when conducting missions in Borg space. Today your captain has been tasked with beaming aboard a Borg spaceship to see if he can discover anything useful. The Borg ship consist of rooms connected with passages of equal length, and with no more than one direct passage between any two rooms. It is possible to find a path from any room to any other. \n\nOn the Borg ship there is also a sentry, placed there by the Borg eons ago. This sentry operates according to a rather unsophisticated algorithm, namely walking at random. This gives the sentry one advantage, however: You will never know where it is! More precisely, once every minute, the sentry chooses one of the neighbouring rooms with uniform probability, and walks quickly to this room. Your captain will also be spending exactly one minute in each room, and to minimise the chances that he will meet the sentry, you time his movement such that he and the sentry move at exactly the same time. Thus he will be caught by the sentry if and only if the two of them move into the same room at the same time, or if they try to swap rooms.\n\nStar Fleet has issued as a direct order the rooms your captain is to visit, and in the exact order. These rooms form a walk on the Borg ship, where each room may be visited several times. Star Fleet has also provided you with a map of the ship. The captain will be beamed down to the first room of the walk, and will be beamed back up from the last room. He risks capture in both these rooms.\n\nNow the captain starts wondering about the chances of success on this mission, hoping them to be very low indeed. After all, that makes it all the more interesting! Getting curious yourself, you decide you want to figure this out. Unfortunately the ship\u2019s android is experiencing problems with his new emotion chip, and thus the task falls on you to compute the captain\u2019s chances of success on this dangerous mission!\n\n-----Input-----\nOne line with $2 \\leq N \\leq 500$ \u2013 the number of nodes.\n\nOne line with $1 \\leq L \\leq 500$ \u2013 the number of rooms the captain must visit.\n\nOne line with $L$ integers describing the captain\u2019s walk, i.e., they give the exact walk the captain must perform.\n\n$N$ lines beginning with an integer $n_ i$ \u2013 the number of neighbours of node $i$ \u2013 followed by $n_ i$ integers \u2013 the neighbours of node $i$, $0$-indexed.\n\n-----Output-----\nThe chance the captain will be able to complete his mission without being discovered by the Borg S", "QUESTION:\nBeing a space captain can be a dangerous endeavour, especially when conducting missions in Borg space. Today your captain has been tasked with beaming aboard a Borg spaceship to see if he can discover anything useful. The Borg ship consist of rooms connected with passages of equal length, and with no more than one direct passage between any two rooms. It is possible to find a path from any room to any other. \n\nOn the Borg ship there is also a sentry, placed there by the Borg eons ago. This sentry operates according to a rather unsophisticated algorithm, namely walking at random. This gives the sentry one advantage, however: You will never know where it is! More precisely, once every minute, the sentry chooses one of the neighbouring rooms with uniform probability, and walks quickly to this room. Your captain will also be spending exactly one minute in each room, and to minimise the chances that he will meet the sentry, you time his movement such that he and the sentry move at exactly the same time. Thus he will be caught by the sentry if and only if the two of them move into the same room at the same time, or if they try to swap rooms.\n\nStar Fleet has issued as a direct order the rooms your captain is to visit, and in the exact order. These rooms form a walk on the Borg ship, where each room may be visited several times. Star Fleet has also provided you with a map of the ship. The captain will be beamed down to the first room of the walk, and will be beamed back up from the last room. He risks capture in both these rooms.\n\nNow the captain starts wondering about the chances of success on this mission, hoping them to be very low indeed. After all, that makes it all the more interesting! Getting curious yourself, you decide you want to figure this out. Unfortunately the ship\u2019s android is experiencing problems with his new emotion chip, and thus the task falls on you to compute the captain\u2019s chances of success on this dangerous mission!\n\n-----Input-----\nOne line with $2 \\leq N \\leq 500$ \u2013 the number of nodes.\n\nOne line with $1 \\leq L \\leq 500$ \u2013 the number of rooms the captain must visit.\n\nOne line with $L$ integers describing the captain\u2019s walk, i.e., they give the exact walk the captain must perform.\n\n$N$ lines beginning with an integer $n_ i$ \u2013 the number of neighbours of node $i$ \u2013 followed by $n_ i$ integers \u2013 the neighbours of node $i$, $0$-indexed.\n\n-----Output-----\nThe chance the captain will be able to complete his mission without being discovered by the Borg S", "QUESTION:\nBeing a space captain can be a dangerous endeavour, especially when conducting missions in Borg space. Today your captain has been tasked with beaming aboard a Borg spaceship to see if he can discover anything useful. The Borg ship consist of rooms connected with passages of equal length, and with no more than one direct passage between any two rooms. It is possible to find a path from any room to any other. \n\nOn the Borg ship there is also a sentry, placed there by the Borg eons ago. This sentry operates according to a rather unsophisticated algorithm, namely walking at random. This gives the sentry one advantage, however: You will never know where it is! More precisely, once every minute, the sentry chooses one of the neighbouring rooms with uniform probability, and walks quickly to this room. Your captain will also be spending exactly one minute in each room, and to minimise the chances that he will meet the sentry, you time his movement such that he and the sentry move at exactly the same time. Thus he will be caught by the sentry if and only if the two of them move into the same room at the same time, or if they try to swap rooms.\n\nStar Fleet has issued as a direct order the rooms your captain is to visit, and in the exact order. These rooms form a walk on the Borg ship, where each room may be visited several times. Star Fleet has also provided you with a map of the ship. The captain will be beamed down to the first room of the walk, and will be beamed back up from the last room. He risks capture in both these rooms.\n\nNow the captain starts wondering about the chances of success on this mission, hoping them to be very low indeed. After all, that makes it all the more interesting! Getting curious yourself, you decide you want to figure this out. Unfortunately the ship\u2019s android is experiencing problems with his new emotion chip, and thus the task falls on you to compute the captain\u2019s chances of success on this dangerous mission!\n\n-----Input-----\nOne line with $2 \\leq N \\leq 500$ \u2013 the number of nodes.\n\nOne line with $1 \\leq L \\leq 500$ \u2013 the number of rooms the captain must visit.\n\nOne line with $L$ integers describing the captain\u2019s walk, i.e., they give the exact walk the captain must perform.\n\n$N$ lines beginning with an integer $n_ i$ \u2013 the number of neighbours of node $i$ \u2013 followed by $n_ i$ integers \u2013 the neighbours of node $i$, $0$-indexed.\n\n-----Output-----\nThe chance the captain will be able to complete his mission without being discovered by the Borg sent", "QUESTION:\nBeing a space captain can be a dangerous endeavour, especially when conducting missions in Borg space. Today your captain has been tasked with beaming aboard a Borg spaceship to see if he can discover anything useful. The Borg ship consist of rooms connected with passages of equal length, and with no more than one direct passage between any two rooms. It is possible to find a path from any room to any other. \n\nOn the Borg ship there is also a sentry, placed there by the Borg eons ago. This sentry operates according to a rather unsophisticated algorithm, namely walking at random. This gives the sentry one advantage, however: You will never know where it is! More precisely, once every minute, the sentry chooses one of the neighbouring rooms with uniform probability, and walks quickly to this room. Your captain will also be spending exactly one minute in each room, and to minimise the chances that he will meet the sentry, you time his movement such that he and the sentry move at exactly the same time. Thus he will be caught by the sentry if and only if the two of them move into the same room at the same time, or if they try to swap rooms.\n\nStar Fleet has issued as a direct order the rooms your captain is to visit, and in the exact order. These rooms form a walk on the Borg ship, where each room may be visited several times. Star Fleet has also provided you with a map of the ship. The captain will be beamed down to the first room of the walk, and will be beamed back up from the last room. He risks capture in both these rooms.\n\nNow the captain starts wondering about the chances of success on this mission, hoping them to be very low indeed. After all, that makes it all the more interesting! Getting curious yourself, you decide you want to figure this out. Unfortunately the ship\u2019s android is experiencing problems with his new emotion chip, and thus the task falls on you to compute the captain\u2019s chances of success on this dangerous mission!\n\n-----Input-----\nOne line with $2 \\leq N \\leq 500$ \u2013 the number of nodes.\n\nOne line with $1 \\leq L \\leq 500$ \u2013 the number of rooms the captain must visit.\n\nOne line with $L$ integers describing the captain\u2019s walk, i.e., they give the exact walk the captain must perform.\n\n$N$ lines beginning with an integer $n_ i$ \u2013 the number of neighbours of node $i$ \u2013 followed by $n_ i$ integers \u2013 the neighbours of node $i$, $0$-indexed.\n\n-----Output-----\nThe chance the captain will be able to complete his mission without being discovered by the Borg sent", "QUESTION:\nBeing a space captain can be a dangerous endeavour, especially when conducting missions in Borg space. Today your captain has been tasked with beaming aboard a Borg spaceship to see if he can discover anything useful. The Borg ship consist of rooms connected with passages of equal length, and with no more than one direct passage between any two rooms. It is possible to find a path from any room to any other. \n\nOn the Borg ship there is also a sentry, placed there by the Borg eons ago. This sentry operates according to a rather unsophisticated algorithm, namely walking at random. This gives the sentry one advantage, however: You will never know where it is! More precisely, once every minute, the sentry chooses one of the neighbouring rooms with uniform probability, and walks quickly to this room. Your captain will also be spending exactly one minute in each room, and to minimise the chances that he will meet the sentry, you time his movement such that he and the sentry move at exactly the same time. Thus he will be caught by the sentry if and only if the two of them move into the same room at the same time, or if they try to swap rooms.\n\nStar Fleet has issued as a direct order the rooms your captain is to visit, and in the exact order. These rooms form a walk on the Borg ship, where each room may be visited several times. Star Fleet has also provided you with a map of the ship. The captain will be beamed down to the first room of the walk, and will be beamed back up from the last room. He risks capture in both these rooms.\n\nNow the captain starts wondering about the chances of success on this mission, hoping them to be very low indeed. After all, that makes it all the more interesting! Getting curious yourself, you decide you want to figure this out. Unfortunately the ship\u2019s android is experiencing problems with his new emotion chip, and thus the task falls on you to compute the captain\u2019s chances of success on this dangerous mission!\n\n-----Input-----\nOne line with $2 \\leq N \\leq 500$ \u2013 the number of nodes.\n\nOne line with $1 \\leq L \\leq 500$ \u2013 the number of rooms the captain must visit.\n\nOne line with $L$ integers describing the captain\u2019s walk, i.e., they give the exact walk the captain must perform.\n\n$N$ lines beginning with an integer $n_ i$ \u2013 the number of neighbours of node $i$ \u2013 followed by $n_ i$ integers \u2013 the neighbours of node $i$, $0$-indexed.\n\n-----Output-----\nThe chance the captain will be able to complete his mission without being discovered by the Borg sent"], "prompt": "\nQUESTION:\nBeing a space captain can be a dangerous endeavour, especially when conducting missions in Borg space. Today your captain has been tasked with beaming aboard a Borg spaceship to see if he can discover anything useful. The Borg ship consist of rooms connected with passages of equal length, and with no more than one direct passage between any two rooms. It is possible to find a path from any room to any other. \n\nOn the Borg ship there is also a sentry, placed there by the Borg eons ago. This sentry operates according to a rather unsophisticated algorithm, namely walking at random. This gives the sentry one advantage, however: You will never know where it is! More precisely, once every minute, the sentry chooses one of the neighbouring rooms with uniform probability, and walks quickly to this room. Your captain will also be spending exactly one minute in each room, and to minimise the chances that he will meet the sentry, you time his movement such that he and the sentry move at exactly the same time. Thus he will be caught by the sentry if and only if the two of them move into the same room at the same time, or if they try to swap rooms.\n\nStar Fleet has issued as a direct order the rooms your captain is to visit, and in the exact order. These rooms form a walk on the Borg ship, where each room may be visited several times. Star Fleet has also provided you with a map of the ship. The captain will be beamed down to the first room of the walk, and will be beamed back up from the last room. He risks capture in both these rooms.\n\nNow the captain starts wondering about the chances of success on this mission, hoping them to be very low indeed. After all, that makes it all the more interesting! Getting curious yourself, you decide you want to figure this out. Unfortunately the ship\u2019s android is experiencing problems with his new emotion chip, and thus the task falls on you to compute the captain\u2019s chances of success on this dangerous mission!\n\n-----Input-----\nOne line with $2 \\leq N \\leq 500$ \u2013 the number of nodes.\n\nOne line with $1 \\leq L \\leq 500$ \u2013 the number of rooms the captain must visit.\n\nOne line with $L$ integers describing the captain\u2019s walk, i.e., they give the exact walk the captain must perform.\n\n$N$ lines beginning with an integer $n_ i$ \u2013 the number of neighbours of node $i$ \u2013 followed by $n_ i$ integers \u2013 the neighbours of node $i$, $0$-indexed.\n\n-----Output-----\nThe chance the captain will be able to complete his mission without being discovered by the Borg sentry. The answer should be correct within an absolute or relative error of $10^{-6}$\n\n-----Examples-----\nSample Input 1:\n3\n1\n0\n2 1 2\n1 0\n1 0\nSample Output 1:\n0.5\n\nSample Input 2:\n8\n6\n1 0 2 3 0 1\n7 1 2 3 4 5 6 7\n1 0\n2 0 3\n2 0 2\n1 0\n1 0\n1 0\n1 0\nSample Output 2:\n0.0446429\nPlease provide the solution as pure code only, without explanations or comments.\n\nANSWER:\n```python\n"}}