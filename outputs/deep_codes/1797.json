{"1797": {"code": ["QUESTION:\nThe construction of subway in Bertown is almost finished! The President of Berland will visit this city soon to look at the new subway himself.\n\nThere are n stations in the subway. It was built according to the Bertown Transport Law:\n\n  For each station i there exists exactly one train that goes from this station. Its destination station is p_{i}, possibly p_{i} = i;  For each station i there exists exactly one station j such that p_{j} = i. \n\nThe President will consider the convenience of subway after visiting it. The convenience is the number of ordered pairs (x, y) such that person can start at station x and, after taking some subway trains (possibly zero), arrive at station y (1 \u2264 x, y \u2264 n).\n\nThe mayor of Bertown thinks that if the subway is not convenient enough, then the President might consider installing a new mayor (and, of course, the current mayor doesn't want it to happen). Before President visits the city mayor has enough time to rebuild some paths of subway, thus changing the values of p_{i} for not more than two subway stations. Of course, breaking the Bertown Transport Law is really bad, so the subway must be built according to the Law even after changes.\n\nThe mayor wants to do these changes in such a way that the convenience of the subway is maximized. Help him to calculate the maximum possible convenience he can get! \n\n\n-----Input-----\n\nThe first line contains one integer number n (1 \u2264 n \u2264 100000) \u2014 the number of stations.\n\nThe second line contains n integer numbers p_1, p_2, ..., p_{n} (1 \u2264 p_{i} \u2264 n) \u2014 the current structure of the subway. All these numbers are distinct.\n\n\n-----Output-----\n\nPrint one number \u2014 the maximum possible value of convenience.\n\n\n-----Examples-----\nInput\n3\n2 1 3\n\nOutput\n9\n\nInput\n5\n1 5 4 3 2\n\nOutput\n17\n\n\n\n-----Note-----\n\nIn the first example the mayor can change p_2 to 3 and p_3 to 1, so there will be 9 pairs: (1, 1), (1, 2), (1, 3), (2, 1), (2, 2), (2, 3), (3, 1), (3, 2), (3, 3).\n\nIn the second example the mayor can change p_2 to 4 and p", "QUESTION:\nThe construction of subway in Bertown is almost finished! The President of Berland will visit this city soon to look at the new subway himself.\n\nThere are n stations in the subway. It was built according to the Bertown Transport Law:\n\n  For each station i there exists exactly one train that goes from this station. Its destination station is p_{i}, possibly p_{i} = i;  For each station i there exists exactly one station j such that p_{j} = i. \n\nThe President will consider the convenience of subway after visiting it. The convenience is the number of ordered pairs (x, y) such that person can start at station x and, after taking some subway trains (possibly zero), arrive at station y (1 \u2264 x, y \u2264 n).\n\nThe mayor of Bertown thinks that if the subway is not convenient enough, then the President might consider installing a new mayor (and, of course, the current mayor doesn't want it to happen). Before President visits the city mayor has enough time to rebuild some paths of subway, thus changing the values of p_{i} for not more than two subway stations. Of course, breaking the Bertown Transport Law is really bad, so the subway must be built according to the Law even after changes.\n\nThe mayor wants to do these changes in such a way that the convenience of the subway is maximized. Help him to calculate the maximum possible convenience he can get! \n\n\n-----Input-----\n\nThe first line contains one integer number n (1 \u2264 n \u2264 100000) \u2014 the number of stations.\n\nThe second line contains n integer numbers p_1, p_2, ..., p_{n} (1 \u2264 p_{i} \u2264 n) \u2014 the current structure of the subway. All these numbers are distinct.\n\n\n-----Output-----\n\nPrint one number \u2014 the maximum possible value of convenience.\n\n\n-----Examples-----\nInput\n3\n2 1 3\n\nOutput\n9\n\nInput\n5\n1 5 4 3 2\n\nOutput\n17\n\n\n\n-----Note-----\n\nIn the first example the mayor can change p_2 to 3 and p_3 to 1, so there will be 9 pairs: (1, 1), (1, 2), (1, 3), (2, 1), (2, 2), (2, 3), (3, 1), (3, 2), (3, 3).\n\nIn the second example the mayor can change p_2 to 4 and p", "QUESTION:\nThe construction of subway in Bertown is almost finished! The President of Berland will visit this city soon to look at the new subway himself.\n\nThere are n stations in the subway. It was built according to the Bertown Transport Law:\n\n  For each station i there exists exactly one train that goes from this station. Its destination station is p_{i}, possibly p_{i} = i;  For each station i there exists exactly one station j such that p_{j} = i. \n\nThe President will consider the convenience of subway after visiting it. The convenience is the number of ordered pairs (x, y) such that person can start at station x and, after taking some subway trains (possibly zero), arrive at station y (1 \u2264 x, y \u2264 n).\n\nThe mayor of Bertown thinks that if the subway is not convenient enough, then the President might consider installing a new mayor (and, of course, the current mayor doesn't want it to happen). Before President visits the city mayor has enough time to rebuild some paths of subway, thus changing the values of p_{i} for not more than two subway stations. Of course, breaking the Bertown Transport Law is really bad, so the subway must be built according to the Law even after changes.\n\nThe mayor wants to do these changes in such a way that the convenience of the subway is maximized. Help him to calculate the maximum possible convenience he can get! \n\n\n-----Input-----\n\nThe first line contains one integer number n (1 \u2264 n \u2264 100000) \u2014 the number of stations.\n\nThe second line contains n integer numbers p_1, p_2, ..., p_{n} (1 \u2264 p_{i} \u2264 n) \u2014 the current structure of the subway. All these numbers are distinct.\n\n\n-----Output-----\n\nPrint one number \u2014 the maximum possible value of convenience.\n\n\n-----Examples-----\nInput\n3\n2 1 3\n\nOutput\n9\n\nInput\n5\n1 5 4 3 2\n\nOutput\n17\n\n\n\n-----Note-----\n\nIn the first example the mayor can change p_2 to 3 and p_3 to 1, so there will be 9 pairs: (1, 1), (1, 2), (1, 3), (2, 1), (2, 2), (2, 3), (3, 1), (3, 2), (3, 3).\n\nIn the second example the mayor can change p_2 to 4 and p", "QUESTION:\nThe construction of subway in Bertown is almost finished! The President of Berland will visit this city soon to look at the new subway himself.\n\nThere are n stations in the subway. It was built according to the Bertown Transport Law:\n\n  For each station i there exists exactly one train that goes from this station. Its destination station is p_{i}, possibly p_{i} = i;  For each station i there exists exactly one station j such that p_{j} = i. \n\nThe President will consider the convenience of subway after visiting it. The convenience is the number of ordered pairs (x, y) such that person can start at station x and, after taking some subway trains (possibly zero), arrive at station y (1 \u2264 x, y \u2264 n).\n\nThe mayor of Bertown thinks that if the subway is not convenient enough, then the President might consider installing a new mayor (and, of course, the current mayor doesn't want it to happen). Before President visits the city mayor has enough time to rebuild some paths of subway, thus changing the values of p_{i} for not more than two subway stations. Of course, breaking the Bertown Transport Law is really bad, so the subway must be built according to the Law even after changes.\n\nThe mayor wants to do these changes in such a way that the convenience of the subway is maximized. Help him to calculate the maximum possible convenience he can get! \n\n\n-----Input-----\n\nThe first line contains one integer number n (1 \u2264 n \u2264 100000) \u2014 the number of stations.\n\nThe second line contains n integer numbers p_1, p_2, ..., p_{n} (1 \u2264 p_{i} \u2264 n) \u2014 the current structure of the subway. All these numbers are distinct.\n\n\n-----Output-----\n\nPrint one number \u2014 the maximum possible value of convenience.\n\n\n-----Examples-----\nInput\n3\n2 1 3\n\nOutput\n9\n\nInput\n5\n1 5 4 3 2\n\nOutput\n17\n\n\n\n-----Note-----\n\nIn the first example the mayor can change p_2 to 3 and p_3 to 1, so there will be 9 pairs: (1, 1), (1, 2), (1, 3), (2, 1), (2, 2), (2, 3), (3, 1), (3, 2), (3, 3).\n\nIn the second example the mayor can change p_2 to 4 and p", "QUESTION:\nThe construction of subway in Bertown is almost finished! The President of Berland will visit this city soon to look at the new subway himself.\n\nThere are n stations in the subway. It was built according to the Bertown Transport Law:\n\n  For each station i there exists exactly one train that goes from this station. Its destination station is p_{i}, possibly p_{i} = i;  For each station i there exists exactly one station j such that p_{j} = i. \n\nThe President will consider the convenience of subway after visiting it. The convenience is the number of ordered pairs (x, y) such that person can start at station x and, after taking some subway trains (possibly zero), arrive at station y (1 \u2264 x, y \u2264 n).\n\nThe mayor of Bertown thinks that if the subway is not convenient enough, then the President might consider installing a new mayor (and, of course, the current mayor doesn't want it to happen). Before President visits the city mayor has enough time to rebuild some paths of subway, thus changing the values of p_{i} for not more than two subway stations. Of course, breaking the Bertown Transport Law is really bad, so the subway must be built according to the Law even after changes.\n\nThe mayor wants to do these changes in such a way that the convenience of the subway is maximized. Help him to calculate the maximum possible convenience he can get! \n\n\n-----Input-----\n\nThe first line contains one integer number n (1 \u2264 n \u2264 100000) \u2014 the number of stations.\n\nThe second line contains n integer numbers p_1, p_2, ..., p_{n} (1 \u2264 p_{i} \u2264 n) \u2014 the current structure of the subway. All these numbers are distinct.\n\n\n-----Output-----\n\nPrint one number \u2014 the maximum possible value of convenience.\n\n\n-----Examples-----\nInput\n3\n2 1 3\n\nOutput\n9\n\nInput\n5\n1 5 4 3 2\n\nOutput\n17\n\n\n\n-----Note-----\n\nIn the first example the mayor can change p_2 to 3 and p_3 to 1, so there will be 9 pairs: (1, 1), (1, 2), (1, 3), (2, 1), (2, 2), (2, 3), (3, 1), (3, 2), (3, 3).\n\nIn the second example the mayor can change p_2 to 4 and p"], "prompt": "\nQUESTION:\nThe construction of subway in Bertown is almost finished! The President of Berland will visit this city soon to look at the new subway himself.\n\nThere are n stations in the subway. It was built according to the Bertown Transport Law:\n\n  For each station i there exists exactly one train that goes from this station. Its destination station is p_{i}, possibly p_{i} = i;  For each station i there exists exactly one station j such that p_{j} = i. \n\nThe President will consider the convenience of subway after visiting it. The convenience is the number of ordered pairs (x, y) such that person can start at station x and, after taking some subway trains (possibly zero), arrive at station y (1 \u2264 x, y \u2264 n).\n\nThe mayor of Bertown thinks that if the subway is not convenient enough, then the President might consider installing a new mayor (and, of course, the current mayor doesn't want it to happen). Before President visits the city mayor has enough time to rebuild some paths of subway, thus changing the values of p_{i} for not more than two subway stations. Of course, breaking the Bertown Transport Law is really bad, so the subway must be built according to the Law even after changes.\n\nThe mayor wants to do these changes in such a way that the convenience of the subway is maximized. Help him to calculate the maximum possible convenience he can get! \n\n\n-----Input-----\n\nThe first line contains one integer number n (1 \u2264 n \u2264 100000) \u2014 the number of stations.\n\nThe second line contains n integer numbers p_1, p_2, ..., p_{n} (1 \u2264 p_{i} \u2264 n) \u2014 the current structure of the subway. All these numbers are distinct.\n\n\n-----Output-----\n\nPrint one number \u2014 the maximum possible value of convenience.\n\n\n-----Examples-----\nInput\n3\n2 1 3\n\nOutput\n9\n\nInput\n5\n1 5 4 3 2\n\nOutput\n17\n\n\n\n-----Note-----\n\nIn the first example the mayor can change p_2 to 3 and p_3 to 1, so there will be 9 pairs: (1, 1), (1, 2), (1, 3), (2, 1), (2, 2), (2, 3), (3, 1), (3, 2), (3, 3).\n\nIn the second example the mayor can change p_2 to 4 and p_3 to 5.\nPlease provide the solution as pure code only, without explanations or comments.\n\nANSWER:\n```python\n"}}